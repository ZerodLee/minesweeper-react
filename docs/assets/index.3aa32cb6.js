import{R as G,j as M,r as c,G as D,F,X as j,a as B}from"./vendor.29531aa2.js";const I=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function l(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(s){if(s.ep)return;s.ep=!0;const n=l(s);fetch(s.href,n)}};I();const d={unStart:Symbol("unStart"),playing:Symbol("playing"),gameOver:Symbol("gameOver")},E={status:d.unStart,isWin:!1,steps:0,seconds:0},A={gameGlobal:E,setGameGlobal:function(){console.error("11111111")}};function T(e,t){return Object.assign({},e,t)}const b=G.createContext(A),r=M.exports.jsx,x=M.exports.jsxs,z={1:"text-blue-600",2:"text-green-600",3:"text-red-600",4:"text-blue-300",5:"text-yellow-600",6:"text-pink-600",7:"text-purple-600",8:"text-red-900"};function W({option:e,onChangeOption:t},l){const[a,s]=c.exports.useState(!1),{gameGlobal:n,setGameGlobal:i}=c.exports.useContext(b),o="w-12 h-12 text-lg "+"mine-item text-2xl font-bold cursor-default relative flex justify-center items-center ",f=" board-item-cover border-4 bg-gradient-to-br from-blue-100 to-blue-400",v="bg-gray-200 border border-blue-300"+X(e.value)+(e.isMine&&e.isClicked?" bg-red-400":"");c.exports.useEffect(()=>{n.status==d.unStart&&a&&s(!1)},[n.status]);const h=m=>{if(e.isClicked)return!1;t(Object.assign(e,{isClicked:!0,isDiscovered:!0}))},y=m=>{m.preventDefault(),m.stopPropagation(),s(!a)},C=a?r("span",{className:"item-flag w-8 h-8 absolute top-0 left-0 flex justify-center items-center",children:r(F,{className:"w-4 h-4 text-red-500"})}):null,p=e.isMine?r(D,{className:"w-5 h-5"}):e.label;return r(G.Fragment,{children:e.isDiscovered?r("span",{className:o+v,children:p}):r("span",{className:o+f,onClick:h,onContextMenu:y,children:C})})}function X(e){let t=" ";return e!=null&&(t+=z[e]),t}function $(e){const t=0;return Math.floor(Math.random()*(e-t+1)+t)}function S(e,t,l){return[[t-1,l-1],[t,l-1],[t+1,l-1],[t-1,l],[t+1,l],[t-1,l+1],[t,l+1],[t+1,l+1]].filter(([s,n])=>e[n]&&e[n][s]).map(([s,n])=>e[n][s])}function q(e,t,l){S(e,t,l).forEach(s=>{s.isMine||(s.value=Number(s.value||0)+1)})}function L(e=9,t=6){return new Array(e).fill("").map((l,a)=>new Array(t).fill(a).map((s,n)=>({isMine:!1,isClicked:!1,isDiscovered:!1,label:"",value:void 0,rowNum:s,colNum:n})))}function K(e=6,t,l){const[a,s]=l,n=S(t,a,s);n.push(t[s][a]),n.forEach(o=>{o.value=null});let i=t.flat();i=i.filter(o=>o.value===void 0),i.forEach(o=>{o.value=null});let u=0;for(;u<e&&i.length>0;){const o=$(i.length-1),[f]=i.splice(o,1);f.isMine=!0,f.value=null,q(t,f.colNum,f.rowNum),u++}return t}function k(e){const t=e.flat(),l=t.filter(s=>!s.isDiscovered),a=t.filter(s=>s.isMine);return console.log(l.length,a.length),l.length==a.length}function U(){const[e,t]=c.exports.useState(L(9,6)),[l,a]=c.exports.useState(!1),{gameGlobal:s,setGameGlobal:n}=c.exports.useContext(b);c.exports.useEffect(()=>{s.status==d.unStart&&t(L(9,6)),s.status==d.unStart&&a(!1)},[s.status]);const i=u=>{let o=e;l||(o=K(6,e,[u.colNum,u.rowNum]),a(!l));const{value:f,isMine:v,rowNum:h,colNum:y}=u;if(typeof f=="number")u.label=String(f),k(o)&&C(!0);else if(v)u.label="\u70B8",o.flat().filter(m=>m.isMine).forEach(m=>{m.isDiscovered=!0}),C(!1);else if(f===null){let p=function(m,w){S(o,m,w).forEach(g=>{g.isDiscovered||(g.isDiscovered=!0,g.value===null?(g.label="",p(g.colNum,g.rowNum)):g.label=String(g.value))}),console.log("recursionDiscover")};p(y,h),k(o)&&C(!0)}o[h][y]=Object.assign(o[h][y],u),t(o.slice()),n({steps:s.steps+1});function C(p){setTimeout(()=>{n({status:d.gameOver,isWin:p})},500)}};return r(c.exports.Fragment,{children:r("div",{className:"mines border-2 border-blue-600",children:e.map((u,o)=>{const f=u.map((v,h)=>r(W,{option:v,onChangeOption:i},h));return r("div",{className:"row-mines flex",children:f},o)})})})}const O={yellow:" bg-yellow-500 hover:bg-yellow-600 active:bg-yellow-700",red:" bg-red-500 hover:bg-red-600 active:bg-red-700 text-white"};function N(e){const t=()=>{e.click()};let l=" py-1.5 px-5 text-base";e.small!==void 0&&(l=" py-1 px-3 text-xs");let a=O.yellow;e.color=="red"&&(a=O.red);const s="game-btn disabled:opacity-50"+a+l;return r("button",{onClick:t,disabled:e.disabled,className:s,children:e.children})}function H(){const{gameGlobal:e,setGameGlobal:t}=c.exports.useContext(b);c.exports.useState(0);const l=()=>{console.log("handleRestart")};function a(u,o){return o.isReset?0:u+o.add}const[s,n]=c.exports.useReducer(a,0);let i;return c.exports.useEffect(()=>(console.log("Information useEffect"),e.status==d.playing?i=setInterval(()=>{console.log("Information seconds",s,i),n({add:1})},1e3):e.status==d.gameOver?clearInterval(i):e.status==d.unStart&&(n({add:0,isReset:!0}),t({steps:0,seconds:0})),()=>clearInterval(i)),[e.status]),x("div",{className:"information-board p-3 bg-white flex justify-center",children:[r(R,{title:"steps",children:e.steps}),x("div",{className:"control-btns flex flex-col justify-around mx-2",children:[r(N,{small:!0,color:"red",click:l,children:"\u91CD\u65B0\u5F00\u59CB"}),r(N,{small:!0,disabled:e.status==d.playing,click:l,children:"\u8BBE\u7F6E\u96BE\u5EA6"})]}),r(R,{title:"seconds",children:s})]})}function R(e){return x("div",{className:"",children:[r("h5",{className:"text-center",children:e.title}),r("div",{className:"w-20 h-9 text-2xl text-center leading-9 tracking-wide bg-gray-900 text-red-700",children:e.children})]})}function J(){const{gameGlobal:e,setGameGlobal:t}=c.exports.useContext(b),l=()=>{t({status:d.playing})},a=()=>{t({status:d.unStart})};return e.status==d.gameOver?x("div",{className:"game-dialog p-3 absolute top-0 left-0 w-full h-full z-50 bg-white",children:[x("div",{className:"mt-3 mx-auto text-3",children:["\u6E38\u620F\u7ED3\u675F\uFF0C\u4F60",e.isWin?"\u8D62":"\u8F93","\u4E86"]}),r(j,{className:"w-8 h-8 absolute top-2 right-2 cursor-pointer hover:text-red-500  transition-colors duration-200",onClick:l}),r(N,{click:a,children:"\u518D\u6765\u4E00\u5C40"})]}):null}function Q(){c.exports.useState(!0);const{gameGlobal:e,setGameGlobal:t}=c.exports.useContext(b),l=()=>{t({status:d.playing})};return e.status==d.unStart?r("div",{className:"game-dialog p-3 absolute top-0 left-0 w-full h-full z-50 bg-white",children:r(N,{click:l,children:"\u5F00\u59CB\u6E38\u620F"})}):null}function V(){const[e,t]=c.exports.useReducer(T,E);return r(b.Provider,{value:{gameGlobal:e,setGameGlobal:t},children:r("div",{className:"flex justify-center container mx-auto",children:x("div",{className:"mine-sweeper relative border-4 border-blue-400",children:[r(H,{}),r(U,{}),r(J,{}),r(Q,{})]})})})}const Y=B.render(r(G.StrictMode,{children:r(V,{})}),document.getElementById("app"));console.log(Y);
